{
	"info": {
		"_postman_id": "912faf98-7617-4396-87f3-6acf602ed9e8",
		"name": "SAFE-DEAL-Affiliates",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "4618509",
		"_collection_link": "https://safe-deal.postman.co/workspace/SafeDeal~f2996930-901c-4b7b-8538-26259ccf2cfd/collection/4618509-912faf98-7617-4396-87f3-6acf602ed9e8?action=share&source=collection_link&creator=4618509"
	},
	"item": [
		{
			"name": "sourceknowledge",
			"item": [
				{
					"name": "SK Init",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.environment.set('page', 1);",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"const itemsCount = response.itemsCount || 0;",
									"const hasMore = response.hasMore;",
									"",
									"const nextPage = parseInt(pm.environment.get('page'), 10) + 1;",
									"",
									"pm.environment.set('page', nextPage);",
									"",
									"pm.test(pm.request.url.toString())",
									"pm.test('Page: '+(nextPage - 1)+' - Items count on this page: '+itemsCount);",
									"",
									"if (hasMore) {",
									"\t  pm.test('hasMore: '+hasMore)",
									"    setTimeout(() => {",
									"        pm.execution.setNextRequest('SK Rolling api-data'); // Loops the request",
									"    }, 2000); // Adding delay before the next request",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-KEY",
								"value": "215a976301158ade4d7ed713f9dbf24c94c28cda6ba04ec24054c0d36bf5bbe8",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://api.sourceknowledge.com/publisher/v2/available-domains?placement=8282&page={{page}}&fallback-urls=1",
							"protocol": "https",
							"host": [
								"api",
								"sourceknowledge",
								"com"
							],
							"path": [
								"publisher",
								"v2",
								"available-domains"
							],
							"query": [
								{
									"key": "placement",
									"value": "8282"
								},
								{
									"key": "page",
									"value": "{{page}}"
								},
								{
									"key": "fallback-urls",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "SK Rolling api-data",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"const itemsCount = response.itemsCount || 0;",
									"const hasMore = response.hasMore;",
									"",
									"const nextPage = parseInt(pm.environment.get('page'), 10) + 1;",
									"",
									"pm.environment.set('page', nextPage);",
									"",
									"pm.test(pm.request.url.toString())",
									"pm.test('Page: '+(nextPage - 1)+' - Items count on this page: '+itemsCount);",
									"",
									"if (hasMore) {",
									"\t  pm.test('hasMore: '+hasMore)",
									"    setTimeout(() => {",
									"        pm.execution.setNextRequest('SK Rolling api-data'); // Loops the request",
									"    }, 1000); // Adding delay before the next request",
									"} else {",
									"    pm.environment.unset('page');",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-KEY",
								"value": "215a976301158ade4d7ed713f9dbf24c94c28cda6ba04ec24054c0d36bf5bbe8",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://api.sourceknowledge.com/publisher/v2/available-domains?placement=8282&page={{page}}&fallback-urls=1",
							"protocol": "https",
							"host": [
								"api",
								"sourceknowledge",
								"com"
							],
							"path": [
								"publisher",
								"v2",
								"available-domains"
							],
							"query": [
								{
									"key": "placement",
									"value": "8282"
								},
								{
									"key": "page",
									"value": "{{page}}"
								},
								{
									"key": "fallback-urls",
									"value": "1"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "admitad",
			"item": [
				{
					"name": "Autorize",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var res = pm.response.json();",
									"pm.collectionVariables.set(\"access_token\", res.access_token);",
									"pm.collectionVariables.set(\"refresh_token\", res.refresh_token);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "vNW9UGl9dhVRlf21hvfHCE0btyzNWk",
									"type": "string"
								},
								{
									"key": "username",
									"value": "Hrt4mG6675M4VBM3gDTBDFfLY11Bj5",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "grant_type",
									"value": "client_credentials",
									"type": "text"
								},
								{
									"key": "client_id",
									"value": "Hrt4mG6675M4VBM3gDTBDFfLY11Bj5",
									"type": "text"
								},
								{
									"key": "scope",
									"value": "advcampaigns  banners websites advcampaigns_for_website",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "https://api.admitad.com/token/",
							"protocol": "https",
							"host": [
								"api",
								"admitad",
								"com"
							],
							"path": [
								"token",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Websites",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://api.admitad.com/websites/v2/",
							"protocol": "https",
							"host": [
								"api",
								"admitad",
								"com"
							],
							"path": [
								"websites",
								"v2",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Afilliates - 0-500 api-data",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://api.admitad.com/advcampaigns/website/2082176/?connection_status=active&limit=500",
							"protocol": "https",
							"host": [
								"api",
								"admitad",
								"com"
							],
							"path": [
								"advcampaigns",
								"website",
								"2082176",
								""
							],
							"query": [
								{
									"key": "connection_status",
									"value": "active"
								},
								{
									"key": "limit",
									"value": "500"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Afilliates - 501-1000 api-data",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://api.admitad.com/advcampaigns/website/2082176/?connection_status=active&limit=500&offset=500",
							"protocol": "https",
							"host": [
								"api",
								"admitad",
								"com"
							],
							"path": [
								"advcampaigns",
								"website",
								"2082176",
								""
							],
							"query": [
								{
									"key": "connection_status",
									"value": "active"
								},
								{
									"key": "limit",
									"value": "500"
								},
								{
									"key": "offset",
									"value": "500"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "impact",
			"item": [
				{
					"name": "GetAds api-data",
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"accept": true
						}
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "pM9LyjPAhkA2ZQWHDHU~CHC~EZGqrwfq",
									"type": "string"
								},
								{
									"key": "username",
									"value": "IRDPzT3JaDRH2670192xPdJyppAQRRcVx1",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://api.impact.com/Mediapartners/IRDPzT3JaDRH2670192xPdJyppAQRRcVx1/Campaigns?Accept=application/json&InsertionOrderStatus=Active&pagesize=700",
							"protocol": "https",
							"host": [
								"api",
								"impact",
								"com"
							],
							"path": [
								"Mediapartners",
								"IRDPzT3JaDRH2670192xPdJyppAQRRcVx1",
								"Campaigns"
							],
							"query": [
								{
									"key": "Accept",
									"value": "application/json"
								},
								{
									"key": "InsertionOrderStatus",
									"value": "Active"
								},
								{
									"key": "pagesize",
									"value": "700"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "partnerboost",
			"item": [
				{
					"name": "PB init api-data",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.environment.set('page', 1);",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"const itemsCount = response.data.list.length || 0;",
									"const hasMore = parseInt(response.data.total_page, 10) > parseInt(pm.environment.get('page'), 10);",
									"",
									"const nextPage = parseInt(pm.environment.get('page'), 10) + 1;",
									"",
									"pm.environment.set('page', nextPage);",
									"",
									"pm.test(pm.request.url.toString())",
									"pm.test('Page: ' + (nextPage - 1) + ' - Items count on this page: ' + itemsCount);",
									"",
									"if (hasMore) {",
									"    pm.test('hasMore: ' + hasMore)",
									"\t\tpm.test(\"Waiting: 500ms for next request\")",
									"    setTimeout(() => {",
									"        pm.execution.setNextRequest('PB Rolling api-data'); // Loops the request",
									"    }, 500);  ",
									"} else {",
									"    pm.environment.unset('page');",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "token",
									"value": "9kgrc4PpTSaWCWWO",
									"type": "text"
								},
								{
									"key": "type",
									"value": "json",
									"type": "text"
								},
								{
									"key": "relationship",
									"value": "Joined",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "https://app.partnerboost.com/api.php?mod=medium&op=monetization_api&limit=500&page={{page}}",
							"protocol": "https",
							"host": [
								"app",
								"partnerboost",
								"com"
							],
							"path": [
								"api.php"
							],
							"query": [
								{
									"key": "mod",
									"value": "medium"
								},
								{
									"key": "op",
									"value": "monetization_api"
								},
								{
									"key": "limit",
									"value": "500"
								},
								{
									"key": "page",
									"value": "{{page}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "PB Rolling api-data",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"const itemsCount = response.data.list.length || 0;",
									"const hasMore = parseInt(response.data.total_page, 10) > parseInt(pm.environment.get('page'), 10);",
									"",
									"const nextPage = parseInt(pm.environment.get('page'), 10) + 1;",
									"",
									"pm.environment.set('page', nextPage);",
									"",
									"pm.test(pm.request.url.toString())",
									"pm.test('Page: ' + (nextPage - 1) + ' - Items count on this page: ' + itemsCount);",
									"",
									"if (hasMore) {",
									"    pm.test('hasMore: ' + hasMore)",
									"\t\tpm.test(\"Waiting: 500ms for next request\")",
									"    setTimeout(() => {",
									"        pm.execution.setNextRequest('PB Rolling api-data'); // Loops the request",
									"    }, 500);  ",
									"} else {",
									"    pm.environment.unset('page');",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "token",
									"value": "9kgrc4PpTSaWCWWO",
									"type": "text"
								},
								{
									"key": "type",
									"value": "json",
									"type": "text"
								},
								{
									"key": "relationship",
									"value": "Joined",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "https://app.partnerboost.com/api.php?mod=medium&op=monetization_api&limit=500&page={{page}}",
							"protocol": "https",
							"host": [
								"app",
								"partnerboost",
								"com"
							],
							"path": [
								"api.php"
							],
							"query": [
								{
									"key": "mod",
									"value": "medium"
								},
								{
									"key": "op",
									"value": "monetization_api"
								},
								{
									"key": "limit",
									"value": "500"
								},
								{
									"key": "page",
									"value": "{{page}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "takeads",
			"item": [
				{
					"name": "TL Init",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let response = pm.response.json();",
									"let recordsReceived = response.data ? response.data.length : 0;",
									"",
									"pm.test(pm.request.url.toString())",
									"pm.test(`Records received: ${recordsReceived}`);",
									"",
									"if (response.meta && response.meta.next) {",
									"    pm.environment.set(\"next\", response.meta.next);",
									"    pm.test(`Next value: ${response.meta.next}`);",
									"} "
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "c0bc94d387b03c2ba084f6b06bb59baf69d1ba67",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text",
								"disabled": true
							}
						],
						"url": {
							"raw": "https://api.takeads.com/v1/product/monetize-api/v2/merchant?limit=500&isActive=true",
							"protocol": "https",
							"host": [
								"api",
								"takeads",
								"com"
							],
							"path": [
								"v1",
								"product",
								"monetize-api",
								"v2",
								"merchant"
							],
							"query": [
								{
									"key": "limit",
									"value": "500"
								},
								{
									"key": "isActive",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "TL Rolling - api-data",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let response = pm.response.json();",
									"let recordsReceived = response.data ? response.data.length : 0;",
									"",
									"pm.test(pm.request.url.toString())",
									"pm.test(`Records received: ${recordsReceived}`);",
									"",
									"if (response.meta && response.meta.next) {",
									"    pm.environment.set(\"next\", response.meta.next);",
									"    pm.test(`Next value: ${response.meta.next}`);",
									"    pm.execution.setNextRequest('TL Rolling - api-data'); // Loops the request",
									"} else {",
									"    pm.environment.unset(\"next\");",
									"    pm.test(\"No next value. Stopping run.\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "c0bc94d387b03c2ba084f6b06bb59baf69d1ba67",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://api.takeads.com/v1/product/monetize-api/v2/merchant?limit=500&isActive=true&next={{next}}",
							"protocol": "https",
							"host": [
								"api",
								"takeads",
								"com"
							],
							"path": [
								"v1",
								"product",
								"monetize-api",
								"v2",
								"merchant"
							],
							"query": [
								{
									"key": "limit",
									"value": "500"
								},
								{
									"key": "isActive",
									"value": "true"
								},
								{
									"key": "next",
									"value": "{{next}}"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "access_token",
			"value": ""
		},
		{
			"key": "refresh_token",
			"value": ""
		}
	]
}